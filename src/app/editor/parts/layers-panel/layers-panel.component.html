<div id="layers-panel-root" class="p-2 text-sm">
  <div id="layers-list-heading" class="font-semibold mb-2">
    {{ "editor.layers.title" | transloco }}
  </div>
  <div id="layers-list-container" class="flex flex-col gap-1">
    @for (layer of document.layers(); let layerIndex = $index; track layer.id) {
      <div
        id="layers-list-item-{{ layer.id }}"
        class="px-2 py-1 rounded-sm border border-neutral-300 dark:border-neutral-700 flex items-center"
        draggable="true"
        (dragstart)="onDragStart($event, layerIndex)"
        (dragover)="onDragOver($event, layerIndex)"
        (drop)="onDrop($event, layerIndex)"
        [class]="
          document.selectedLayerId() === layer.id
            ? 'px-2 py-1 rounded-sm border border-neutral-300 dark:border-neutral-700 flex items-center bg-neutral-200 dark:bg-neutral-700'
            : 'px-2 py-1 rounded-sm border border-neutral-300 dark:border-neutral-700 flex items-center hover:bg-neutral-200/60 dark:hover:bg-neutral-700/60'
        "
      >
        <div
          id="layers-list-item-handle-{{ layer.id }}"
          class="w-4 h-6 flex items-center justify-center cursor-grab mr-2"
        >
          <ng-icon
            id="layers-list-item-handle-icon-{{ layer.id }}"
            name="featherAlignJustify"
            class="w-4 h-4"
          ></ng-icon>
        </div>
        <button
          type="button"
          id="layers-list-item-visibility-{{ layer.id }}"
          class="w-6 h-6 rounded-sm border border-neutral-300 dark:border-neutral-700 grid place-items-center"
          (click)="document.toggleLayerVisibility(layer.id)"
          [title]="
            layer.visible
              ? ('editor.layers.hide' | transloco)
              : ('editor.layers.show' | transloco)
          "
        >
          <ng-icon
            id="layers-list-item-visibility-icon-{{ layer.id }}"
            [name]="layer.visible ? 'featherEye' : 'featherEyeOff'"
            class="w-4 h-4"
          ></ng-icon>
        </button>
        <button
          type="button"
          id="layers-list-item-select-{{ layer.id }}"
          class="flex-1 text-left ml-2"
          (click)="select(layer.id)"
        >
          <span
            id="layers-list-item-name-{{ layer.id }}"
            class="truncate opacity-90"
            >{{ layer.name }}</span
          >
        </button>
        <button
          type="button"
          id="layers-list-item-delete-{{ layer.id }}"
          class="w-6 h-6 rounded-sm border border-neutral-300 dark:border-neutral-700 grid place-items-center disabled:opacity-50 ml-2"
          (click)="document.removeLayer(layer.id)"
          [disabled]="document.layers().length <= 1"
          [title]="'editor.layers.delete' | transloco"
        >
          <ng-icon
            id="layers-list-item-delete-icon-{{ layer.id }}"
            name="featherTrash"
            class="w-4 h-4"
          ></ng-icon>
        </button>
      </div>
    }
  </div>

  <div id="layers-add-row" class="mt-3">
    <button
      type="button"
      id="layers-add-button"
      class="w-full h-8 rounded-sm border border-neutral-300 dark:border-neutral-700 flex items-center justify-center gap-2"
      (click)="onAddLayer()"
      [title]="'editor.layers.add' | transloco"
    >
      <ng-icon id="layers-add-icon" name="plus" class="w-4 h-4"></ng-icon>
      <span id="layers-add-label" class="text-sm">{{
        "editor.layers.add" | transloco
      }}</span>
    </button>
  </div>
</div>
