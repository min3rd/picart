<div class="p-2 text-sm">
  <div class="font-semibold mb-2">{{ 'layers.title' | transloco }}</div>
  <div class="flex flex-col gap-1">
    @for (l of state.layers(); let i = $index; track l.id) {
      <div
        class="px-2 py-1 rounded-sm border border-neutral-300 dark:border-neutral-700 flex items-center"
        draggable="true"
        (dragstart)="onDragStart($event, i)"
        (dragover)="onDragOver($event, i)"
        (drop)="onDrop($event, i)"
        [class]="state.selectedLayerId() === l.id ? 'bg-neutral-200 dark:bg-neutral-700' : 'hover:bg-neutral-200/60 dark:hover:bg-neutral-700/60'"
      >
        <div class="w-4 h-6 flex items-center justify-center cursor-grab mr-2"><ng-icon name="drag" class="w-4 h-4" /></div>
        <button type="button" class="w-6 h-6 rounded-sm border border-neutral-300 dark:border-neutral-700 grid place-items-center"
          (click)="state.toggleLayerVisibility(l.id)" [title]="l.visible ? ('layers.hide' | transloco) : ('layers.show' | transloco)">
          <ng-icon [name]="l.visible ? 'eye' : 'eyeSlash'" class="w-4 h-4"></ng-icon>
        </button>
        <button type="button" class="flex-1 text-left ml-2" (click)="select(l.id)">
          <span class="truncate opacity-90">{{ l.name }}</span>
        </button>
        <button type="button" class="w-6 h-6 rounded-sm border border-neutral-300 dark:border-neutral-700 grid place-items-center disabled:opacity-50 ml-2"
          (click)="state.removeLayer(l.id)" [disabled]="state.layers().length <= 1" title="{{ 'layers.delete' | transloco }}">
          <ng-icon name="trash" class="w-4 h-4"></ng-icon>
        </button>
      </div>
    }
  </div>
  <div class="mt-3">
    <button type="button" class="w-full h-8 rounded-sm border border-neutral-300 dark:border-neutral-700 flex items-center justify-center gap-2"
      (click)="onAddLayer()" title="{{ 'layers.add' | transloco }}">
      <ng-icon name="plus" class="w-4 h-4"></ng-icon>
      <span class="text-sm">{{ 'layers.add' | transloco }}</span>
    </button>
  </div>
</div>
